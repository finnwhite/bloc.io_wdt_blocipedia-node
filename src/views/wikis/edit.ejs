<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include( "../includes/head-start.ejs",
      { docTitle: "Blocipedia | Edit Wiki" }
    ); -%>
  </head>
  <body>
    <%- include( "../includes/navbar.ejs" ); -%>
    <main class="container">
      <%- include( "../includes/messages.ejs" ); -%>

      <h1>Edit Wiki</h1>

      <form method="POST" action="/wikis/<%= wiki.id %>/update">
        <div class="form-group">
          <% const attr = { pub: [], prv: [] };
            if ( wiki.private ) { attr.prv.push( "checked" ); }
            else { attr.pub.push( "checked" ); }
            if ( !permitPublic ) { attr.pub.push( "disabled" ); }
            if ( !permitPrivate ) { attr.prv.push( "disabled" ); } -%>
          <div class="form-check form-check-inline">
            <input type="radio" class="form-check-input" name="private" id="makePublic" aria-label="Make public" value="0" <%= attr.pub.join( " " ); %>>
            <label for="makePublic" class="form-check-label badge badge-secondary text-white">public</label>
          </div>
          <% if ( wiki.private || permitPrivate ) { -%>
            <div class="form-check form-check-inline">
              <input type="radio" class="form-check-input" name="private" id="makePrivate" aria-label="Make private" value="1" <%= attr.prv.join( " " ); %>>
              <label for="makePrivate" class="form-check-label badge badge-secondary text-white">private</label>
            </div>
          <% } -%>
        </div>
        <div class="form-group">
          <label for="title">Title:</label>
          <input type="text" class="form-control" name="title" id="title" aria-describedby="titleHelp" placeholder="Enter title" value="<%= wiki.title %>">
          <small id="titleHelp" class="form-text text-muted">Title must be at least 2 characters in length.</small>
        </div>
        <div class="form-group">
          <label for="body">Body Text:</label>
          <textarea rows="8" class="form-control" name="body" id="body" aria-describedby="bodyHelp" placeholder="Enter body text"><%= wiki.body %></textarea>
          <small id="bodyHelp" class="form-text text-muted">Body text must be at least 4 characters in length.</small>
        </div>
        <button type="submit" class="btn btn-primary">Update</button>
      </form>

    </main>
    <%- include( "../includes/body-end.ejs" ); -%>
  </body>
</html>
